
> tad@0.8.5 unit-test /Users/antony/home/src/tad
> ELECTRON_RUN_AS_NODE=true && electron build/allTests.bundle.js


  basic PathTree
pt1:  { '"foo"': { '"bar"': { '"baz"': {} } } }
pt2:  { '"foo"': { '"bar"': { '"baz"': {}, '"blech"': {} } },
  '"a"': { '"b"': { '"c"': {} } } }
[ 'foo' ]
[ 'foo', 'bar' ]
[ 'foo', 'bar', 'baz' ]
[ 'foo', 'bar', 'blech' ]
[ 'a' ]
[ 'a', 'b' ]
[ 'a', 'b', 'c' ]
pt2Paths:  [ [ 'foo' ],
  [ 'foo', 'bar' ],
  [ 'foo', 'bar', 'baz' ],
  [ 'foo', 'bar', 'blech' ],
  [ 'a' ],
  [ 'a', 'b' ],
  [ 'a', 'b', 'c' ] ]
    ✓ full path set from iterator (comparing to saved snapshot)
pt3Paths:  [ [ 'foo' ],
  [ 'foo', 'bar' ],
  [ 'foo', 'bar', 'blech' ],
  [ 'a' ],
  [ 'a', 'b' ],
  [ 'a', 'b', 'c' ] ]
    ✓ path set after closing one path (comparing to saved snapshot)
pt4Paths:  [ [ 'foo' ],
  [ 'foo', 'bar' ],
  [ 'a' ],
  [ 'a', 'b' ],
  [ 'a', 'b', 'c' ] ]
    ✓ path set after closing two paths with common prefix (comparing to saved snapshot)
pt5Paths:  [ [ 'foo' ], [ 'foo', 'bar' ], [ 'a' ], [ 'a', 'b' ] ]
    ✓ basic isOpen check
    ✓ negative isOpen check

  sqlite test setup
[17:22:43.670] [info] starting metascan...
[17:22:43.672] [info] file size:  2074
[17:22:43.685] [info] countStream: bytesRead:  2074
[17:22:43.687] [info] metascan completed in 0s 14.553074ms
[17:22:43.687] [info] metascan complete. metadata: { columnIds: [ 'Name', 'Title', 'Base', 'TCOE', 'JobFamily', 'Union' ],
  columnNames: [ 'Name', 'Title', 'Base', 'TCOE', 'Job Family', 'Union' ],
  columnTypes: [ 'text', 'text', 'integer', 'integer', 'text', 'text' ],
  rowCount: 23,
  tableName: 'barttest',
  csvOptions: { delimiter: ',', objectMode: true } }
[17:22:43.690] [info] table created
[17:22:43.700] [info] consumeStream completed, rowCount:  23
set rtc:  SqliteContext {
  db:
   Database {
     driver: Database { open: true, filename: ':memory:', mode: 65542 },
     Promise: [Function: Promise],
     open: [Function] },
  tableMap: { barttest: { tableName: 'barttest', schema: [Schema] } },
  showQueries: false }
    ✓ setup and import complete

  basic table query
dbTest0: test start:  SqliteContext {
  db:
   Database {
     driver: Database { open: true, filename: ':memory:', mode: 65542 },
     Promise: [Function: Promise],
     open: [Function] },
  tableMap: { barttest: { tableName: 'barttest', schema: [Schema] } },
  showQueries: false }
    ✓ basic table read
    ✓ getSchema column ids
    ✓ getSchema column types
    ✓ q1 rowData.length
    ✓ first row matches expected
TCOE sum:  4691559

  basic row count
dbTestRowCount0: test start:  SqliteContext {
  db:
   Database {
     driver: Database { open: true, filename: ':memory:', mode: 65542 },
     Promise: [Function: Promise],
     open: [Function] },
  tableMap: { barttest: { tableName: 'barttest', schema: [Schema] } },
  showQueries: false }
[17:22:43.717] [info] time to run query: 0s 4.959615ms
    ✓ got row count!
rowCount:  23
    ✓ row count matches expected

  basic project operator
    ✓ project query returned success
    ✓ result schema from project
    ✓ project result row 0

  basic groupBy
    ✓ groupBy query schema
    ✓ correct number of grouped rows
    ✓ grouped TCOE sum matches raw sum

  groupBy aggs
group by job family: 
item     
---------
JobFamily
Title    
Union    
Name     
Base     
TCOE     

JobFamily                          Title                                Union            Name              Base     TCOE   
---------------------------------  -----------------------------------  ---------------  ----------------  -------  -------
Engineering & Systems Engineering  null                                 Non-Represented  null              309734   422244 
Executive Management               null                                 Non-Represented  null              1030722  1389290
Finance & Accounting               Controller-Treasurer                 Non-Represented  Schroeder, Scott  208744   287139 
Legal & Paralegal                  null                                 Non-Represented  null              564028   766571 
Maintenance, Vehicle & Facilities  null                                 SEIU             null              366223   594761 
Police                             Revenue Protection Guard             BPOA             Ornellas, Robert  75701    127660 
Public Affairs & Marketing         Department Manager Gov't & Comm Rel  Non-Represented  Hamill, Kerry     130035   181955 
Safety                             Chief Safety Officer                 Non-Represented  Hardy, Leonard    152125   211941 
Transportation Operations          null                                 null             null              413909   709998 

    ✓ should be equivalent
    ✓ number of grouped rows in q4 result
    ✓ tcoe sum after groupBy

  basic filter
    ✓ expected row count after filter
item     
---------
Name     
Title    
Base     
TCOE     
JobFamily
Union    

Name              Title                                 Base    TCOE    JobFamily             Union          
----------------  ------------------------------------  ------  ------  --------------------  ---------------
Crunican, Grace   General Manager                       312461  399921  Executive Management  Non-Represented
Dugger, Dorothy   General Manager                       298700  419661  Executive Management  Non-Represented
Oversier, Paul    Assistant General Manager Operations  212647  288160  Executive Management  Non-Represented
DeVaughn, Marcia  Deputy General Manager                206914  281548  Executive Management  Non-Represented


  escaped literal string filter
    ✓ expected row count after filter
item     
---------
Name     
Title    
Base     
TCOE     
JobFamily
Union    

Name           Title                                Base    TCOE    JobFamily                   Union          
-------------  -----------------------------------  ------  ------  --------------------------  ---------------
Hamill, Kerry  Department Manager Gov't & Comm Rel  130035  181955  Public Affairs & Marketing  Non-Represented


  query deserialization
serialized query
{
  "query": {
    "expType": "QueryExp",
    "operator": "filter",
    "valArgs": [
      {
        "expType": "FilterExp",
        "op": "AND",
        "opArgs": [
          {
            "expType": "BinRelExp",
            "op": "EQ",
            "lhs": {
              "expType": "ColRef",
              "colName": "JobFamily"
            },
            "rhs": {
              "expType": "ConstVal",
              "val": "Executive Management"
            }
          }
        ]
      }
    ],
    "tableArgs": [
      {
        "expType": "QueryExp",
        "operator": "table",
        "valArgs": [
          "barttest"
        ],
        "tableArgs": []
      }
    ]
  }
}
deserialized query:  { query:
   QueryExp {
     expType: 'QueryExp',
     operator: 'filter',
     valArgs: [ [FilterExp] ],
     tableArgs: [ [QueryExp] ] } }
got results of evaluating deserialized query
item     
---------
Name     
Title    
Base     
TCOE     
JobFamily
Union    

Name              Title                                 Base    TCOE    JobFamily             Union          
----------------  ------------------------------------  ------  ------  --------------------  ---------------
Crunican, Grace   General Manager                       312461  399921  Executive Management  Non-Represented
Dugger, Dorothy   General Manager                       298700  419661  Executive Management  Non-Represented
Oversier, Paul    Assistant General Manager Operations  212647  288160  Executive Management  Non-Represented
DeVaughn, Marcia  Deputy General Manager                206914  281548  Executive Management  Non-Represented

    ✓ expected row count after filter

  mapColumns
    ✓ EmpName
    ✓ EmpName metadata
    ✓ expected row count after mapColumns

  mapColumnsByIndex
    ✓ EmpName
    ✓ expected row count after mapColumnsByIndex

  concat
    ✓ expected row count after filter and concat
    ✓ filter and concat column vals

  basic sort
item     
---------
Name     
Title    
Base     
TCOE     
JobFamily
Union    

Name              Title                                 Base    TCOE    JobFamily             Union          
----------------  ------------------------------------  ------  ------  --------------------  ---------------
Crunican, Grace   General Manager                       312461  399921  Executive Management  Non-Represented
DeVaughn, Marcia  Deputy General Manager                206914  281548  Executive Management  Non-Represented
Dugger, Dorothy   General Manager                       298700  419661  Executive Management  Non-Represented
Hardy, Leonard    Chief Safety Officer                  152125  211941  Safety                Non-Represented
Oversier, Paul    Assistant General Manager Operations  212647  288160  Executive Management  Non-Represented


  compound key sort
item     
---------
Name     
Title    
Base     
TCOE     
JobFamily
Union    

Name              Title                                 Base    TCOE    JobFamily             Union          
----------------  ------------------------------------  ------  ------  --------------------  ---------------
Dugger, Dorothy   General Manager                       298700  419661  Executive Management  Non-Represented
Crunican, Grace   General Manager                       312461  399921  Executive Management  Non-Represented
Oversier, Paul    Assistant General Manager Operations  212647  288160  Executive Management  Non-Represented
DeVaughn, Marcia  Deputy General Manager                206914  281548  Executive Management  Non-Represented
Hardy, Leonard    Chief Safety Officer                  152125  211941  Safety                Non-Represented


  extend with expression
item     
---------
Name     
Title    
Base     
TCOE     
JobFamily
Union    
ExtraComp

Name              Title                                 Base    TCOE    JobFamily             Union            ExtraComp
----------------  ------------------------------------  ------  ------  --------------------  ---------------  ---------
Crunican, Grace   General Manager                       312461  399921  Executive Management  Non-Represented  87460    
Dugger, Dorothy   General Manager                       298700  419661  Executive Management  Non-Represented  120961   
Oversier, Paul    Assistant General Manager Operations  212647  288160  Executive Management  Non-Represented  75513    
DeVaughn, Marcia  Deputy General Manager                206914  281548  Executive Management  Non-Represented  74634    
Hardy, Leonard    Chief Safety Officer                  152125  211941  Safety                Non-Represented  59816    


  initial aggTree test
got schema:  Schema {
  columns:
   [ 'JobFamily', 'Title', 'Union', 'Name', 'Base', 'TCOE', 'Rec' ],
  columnMetadata:
   { Rec: { type: 'integer' },
     JobFamily: { displayName: 'Job Family', type: 'text' },
     Title: { displayName: 'Title', type: 'text' },
     Union: { displayName: 'Union', type: 'text' },
     Name: { displayName: 'Name', type: 'text' },
     Base: { displayName: 'Base', type: 'integer' },
     TCOE: { displayName: 'TCOE', type: 'integer' } },
  _sortedColumns: null,
  columnIndices:
   { JobFamily: 0,
     Title: 1,
     Union: 2,
     Name: 3,
     Base: 4,
     TCOE: 5,
     Rec: 6 } }
vpivot initial promise resolved...
root query exp:  QueryExp {
  expType: 'QueryExp',
  operator: 'project',
  valArgs:
   [ [ 'JobFamily',
       'Title',
       'Union',
       'Name',
       'Base',
       'TCOE',
       'Rec',
       '_depth',
       '_pivot',
       '_isRoot' ] ],
  tableArgs:
   [ QueryExp {
       expType: 'QueryExp',
       operator: 'extend',
       valArgs: [Array],
       tableArgs: [Array] } ] }
root query: 
item     
---------
JobFamily
Title    
Union    
Name     
Base     
TCOE     
Rec      
_depth   
_pivot   
_isRoot  

JobFamily  Title  Union  Name  Base     TCOE     Rec  _depth  _pivot  _isRoot
---------  -----  -----  ----  -------  -------  ---  ------  ------  -------
null       null   null   null  3251221  4691559  23   0       null    1      

open root query: 
item      
----------
JobFamily 
Title     
Union     
Name      
Base      
TCOE      
Rec       
_depth    
_pivot    
_isRoot   
_sortVal_0
_sortVal_1
_sortVal_2
_path0    
_path1    

JobFamily                          Title                                Union            Name              Base     TCOE     Rec  _depth  _pivot                             _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                             _path1
---------------------------------  -----------------------------------  ---------------  ----------------  -------  -------  ---  ------  ---------------------------------  -------  ----------  ----------  ----------  ---------------------------------  ------
Engineering & Systems Engineering  null                                 Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering  0        1           0           0           Engineering & Systems Engineering  null  
Executive Management               null                                 Non-Represented  null              1030722  1389290  4    1       Executive Management               0        1           0           0           Executive Management               null  
Finance & Accounting               Controller-Treasurer                 Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting               0        1           0           0           Finance & Accounting               null  
Legal & Paralegal                  null                                 Non-Represented  null              564028   766571   3    1       Legal & Paralegal                  0        1           0           0           Legal & Paralegal                  null  
Maintenance, Vehicle & Facilities  null                                 SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities  0        1           0           0           Maintenance, Vehicle & Facilities  null  
Police                             Revenue Protection Guard             BPOA             Ornellas, Robert  75701    127660   1    1       Police                             0        1           0           0           Police                             null  
Public Affairs & Marketing         Department Manager Gov't & Comm Rel  Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing         0        1           0           0           Public Affairs & Marketing         null  
Safety                             Chief Safety Officer                 Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                             0        1           0           0           Safety                             null  
Transportation Operations          null                                 null             null              413909   709998   5    1       Transportation Operations          0        1           0           0           Transportation Operations          null  

    ✓ Q1 schema columns
    ✓ Q1 rowData length
    ✓ Q1 rowData sum(TCOE)
after opening path "Executive Management":
item      
----------
JobFamily 
Title     
Union     
Name      
Base      
TCOE      
Rec       
_depth    
_pivot    
_isRoot   
_sortVal_0
_sortVal_1
_sortVal_2
_path0    
_path1    

JobFamily             Title                                 Union            Name              Base    TCOE    Rec  _depth  _pivot                                _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                _path1                              
--------------------  ------------------------------------  ---------------  ----------------  ------  ------  ---  ------  ------------------------------------  -------  ----------  ----------  ----------  --------------------  ------------------------------------
Executive Management  Assistant General Manager Operations  Non-Represented  Oversier, Paul    212647  288160  1    2       Assistant General Manager Operations  0        1           1           0           Executive Management  Assistant General Manager Operations
Executive Management  Deputy General Manager                Non-Represented  DeVaughn, Marcia  206914  281548  1    2       Deputy General Manager                0        1           1           0           Executive Management  Deputy General Manager              
Executive Management  General Manager                       Non-Represented  null              611161  819582  2    2       General Manager                       0        1           1           0           Executive Management  General Manager                     

after opening path /Executive Management/General Manager:
item      
----------
JobFamily 
Title     
Union     
Name      
Base      
TCOE      
Rec       
_depth    
_pivot    
_isRoot   
_sortVal_0
_sortVal_1
_sortVal_2
_path0    
_path1    

JobFamily             Title            Union            Name             Base    TCOE    Rec  _depth  _pivot           _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                _path1         
--------------------  ---------------  ---------------  ---------------  ------  ------  ---  ------  ---------------  -------  ----------  ----------  ----------  --------------------  ---------------
Executive Management  General Manager  Non-Represented  Crunican, Grace  312461  399921  1    3       Crunican, Grace  0        1           1           1           Executive Management  General Manager
Executive Management  General Manager  Non-Represented  Dugger, Dorothy  298700  419661  1    3       Dugger, Dorothy  0        1           1           1           Executive Management  General Manager

evaluating query returned from getTreeQuery:
item      
----------
JobFamily 
Title     
Union     
Name      
Base      
TCOE      
Rec       
_depth    
_pivot    
_isRoot   
_sortVal_0
_sortVal_1
_sortVal_2
_path0    
_path1    

JobFamily                          Title                                 Union            Name              Base     TCOE     Rec  _depth  _pivot                                _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                             _path1                              
---------------------------------  ------------------------------------  ---------------  ----------------  -------  -------  ---  ------  ------------------------------------  -------  ----------  ----------  ----------  ---------------------------------  ------------------------------------
null                               null                                  null             null              3251221  4691559  23   0       null                                  1        0           0           0           null                               null                                
Engineering & Systems Engineering  null                                  Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering     0        1           0           0           Engineering & Systems Engineering  null                                
Executive Management               null                                  Non-Represented  null              1030722  1389290  4    1       Executive Management                  0        1           0           0           Executive Management               null                                
Executive Management               Assistant General Manager Operations  Non-Represented  Oversier, Paul    212647   288160   1    2       Assistant General Manager Operations  0        1           1           0           Executive Management               Assistant General Manager Operations
Executive Management               Deputy General Manager                Non-Represented  DeVaughn, Marcia  206914   281548   1    2       Deputy General Manager                0        1           1           0           Executive Management               Deputy General Manager              
Executive Management               General Manager                       Non-Represented  null              611161   819582   2    2       General Manager                       0        1           1           0           Executive Management               General Manager                     
Finance & Accounting               Controller-Treasurer                  Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting                  0        1           0           0           Finance & Accounting               null                                
Legal & Paralegal                  null                                  Non-Represented  null              564028   766571   3    1       Legal & Paralegal                     0        1           0           0           Legal & Paralegal                  null                                
Maintenance, Vehicle & Facilities  null                                  SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities     0        1           0           0           Maintenance, Vehicle & Facilities  null                                
Police                             Revenue Protection Guard              BPOA             Ornellas, Robert  75701    127660   1    1       Police                                0        1           0           0           Police                             null                                
Public Affairs & Marketing         Department Manager Gov't & Comm Rel   Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing            0        1           0           0           Public Affairs & Marketing         null                                
Safety                             Chief Safety Officer                  Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                                0        1           0           0           Safety                             null                                
Transportation Operations          null                                  null             null              413909   709998   5    1       Transportation Operations             0        1           0           0           Transportation Operations          null                                


  sorted aggTree test
vpivot initial promise resolved...
sort query depth 1: 
item        
------------
_path0      
_sortVal_0_0
_sortVal_0_1
_sortVal_0_2

_path0                             _sortVal_0_0  _sortVal_0_1  _sortVal_0_2                       
---------------------------------  ------------  ------------  -----------------------------------
Engineering & Systems Engineering  422244        309734        null                               
Executive Management               1389290       1030722       null                               
Finance & Accounting               287139        208744        Controller-Treasurer               
Legal & Paralegal                  766571        564028        null                               
Maintenance, Vehicle & Facilities  594761        366223        null                               
Police                             127660        75701         Revenue Protection Guard           
Public Affairs & Marketing         181955        130035        Department Manager Gov't & Comm Rel
Safety                             211941        152125        Chief Safety Officer               
Transportation Operations          709998        413909        null                               

sort query depth 2: 
item        
------------
_path0      
_path1      
_sortVal_1_0
_sortVal_1_1
_sortVal_1_2

_path0                             _path1                                _sortVal_1_0  _sortVal_1_1  _sortVal_1_2                        
---------------------------------  ------------------------------------  ------------  ------------  ------------------------------------
Engineering & Systems Engineering  Group Manager Systems Capital Prog    212535        152434        Group Manager Systems Capital Prog  
Engineering & Systems Engineering  Group Manager, Capital Projects       209709        157300        Group Manager, Capital Projects     
Executive Management               Assistant General Manager Operations  288160        212647        Assistant General Manager Operations
Executive Management               Deputy General Manager                281548        206914        Deputy General Manager              
Executive Management               General Manager                       819582        611161        General Manager                     
Finance & Accounting               Controller-Treasurer                  287139        208744        Controller-Treasurer                
Legal & Paralegal                  General Counsel                       321543        238269        General Counsel                     
Legal & Paralegal                  Senior Attorney                       445028        325759        Senior Attorney                     
Maintenance, Vehicle & Facilities  Electrician                           113775        59817         Electrician                         
Maintenance, Vehicle & Facilities  Structures Inspector                  124962        77446         Structures Inspector                
Maintenance, Vehicle & Facilities  Transit Vehicle Mechanic              104260        74068         Transit Vehicle Mechanic            
Maintenance, Vehicle & Facilities  Vehicle Inspector                     123432        77446         Vehicle Inspector                   
Maintenance, Vehicle & Facilities  Wayside Inspector                     128332        77446         Wayside Inspector                   
Police                             Revenue Protection Guard              127660        75701         Revenue Protection Guard            
Public Affairs & Marketing         Department Manager Gov't & Comm Rel   181955        130035        Department Manager Gov't & Comm Rel 
Safety                             Chief Safety Officer                  211941        152125        Chief Safety Officer                
Transportation Operations          Chief Transportation Officer          238211        170383        Chief Transportation Officer        
Transportation Operations          Station Agent                         352988        182342        Station Agent                       
Transportation Operations          Train Operator                        118799        61184         Train Operator                      

got depth 1 query and sortQuery, joining...: 
result of join query: 
item        
------------
JobFamily   
Title       
Union       
Name        
Base        
TCOE        
Rec         
_depth      
_pivot      
_isRoot     
_sortVal_0  
_sortVal_1  
_sortVal_2  
_path0      
_path1      
_sortVal_0_0
_sortVal_0_1
_sortVal_0_2

JobFamily                          Title                                Union            Name              Base     TCOE     Rec  _depth  _pivot                             _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                             _path1  _sortVal_0_0  _sortVal_0_1  _sortVal_0_2                       
---------------------------------  -----------------------------------  ---------------  ----------------  -------  -------  ---  ------  ---------------------------------  -------  ----------  ----------  ----------  ---------------------------------  ------  ------------  ------------  -----------------------------------
Engineering & Systems Engineering  null                                 Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering  0        1           0           0           Engineering & Systems Engineering  null    422244        309734        null                               
Executive Management               null                                 Non-Represented  null              1030722  1389290  4    1       Executive Management               0        1           0           0           Executive Management               null    1389290       1030722       null                               
Finance & Accounting               Controller-Treasurer                 Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting               0        1           0           0           Finance & Accounting               null    287139        208744        Controller-Treasurer               
Legal & Paralegal                  null                                 Non-Represented  null              564028   766571   3    1       Legal & Paralegal                  0        1           0           0           Legal & Paralegal                  null    766571        564028        null                               
Maintenance, Vehicle & Facilities  null                                 SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities  0        1           0           0           Maintenance, Vehicle & Facilities  null    594761        366223        null                               
Police                             Revenue Protection Guard             BPOA             Ornellas, Robert  75701    127660   1    1       Police                             0        1           0           0           Police                             null    127660        75701         Revenue Protection Guard           
Public Affairs & Marketing         Department Manager Gov't & Comm Rel  Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing         0        1           0           0           Public Affairs & Marketing         null    181955        130035        Department Manager Gov't & Comm Rel
Safety                             Chief Safety Officer                 Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                             0        1           0           0           Safety                             null    211941        152125        Chief Safety Officer               
Transportation Operations          null                                 null             null              413909   709998   5    1       Transportation Operations          0        1           0           0           Transportation Operations          null    709998        413909        null                               


  basic async test
tf: got result:
{ JobFamily: 'Executive Management',
  Title: 'General Manager',
  Union: 'Non-Represented',
  Name: 'Crunican, Grace',
  Base: 312461,
  TCOE: 399921 } '\n...'
done logging table
    ✓ handle async result

  asyncAggTreeSortTest
vpivot initial promise resolved...
sort query depth 1: 
item        
------------
_path0      
_sortVal_0_0
_sortVal_0_1
_sortVal_0_2

_path0                             _sortVal_0_0  _sortVal_0_1  _sortVal_0_2                       
---------------------------------  ------------  ------------  -----------------------------------
Engineering & Systems Engineering  422244        309734        null                               
Executive Management               1389290       1030722       null                               
Finance & Accounting               287139        208744        Controller-Treasurer               
Legal & Paralegal                  766571        564028        null                               
Maintenance, Vehicle & Facilities  594761        366223        null                               
Police                             127660        75701         Revenue Protection Guard           
Public Affairs & Marketing         181955        130035        Department Manager Gov't & Comm Rel
Safety                             211941        152125        Chief Safety Officer               
Transportation Operations          709998        413909        null                               

sort query depth 2: 
item        
------------
_path0      
_path1      
_sortVal_1_0
_sortVal_1_1
_sortVal_1_2

_path0                             _path1                                _sortVal_1_0  _sortVal_1_1  _sortVal_1_2                        
---------------------------------  ------------------------------------  ------------  ------------  ------------------------------------
Engineering & Systems Engineering  Group Manager Systems Capital Prog    212535        152434        Group Manager Systems Capital Prog  
Engineering & Systems Engineering  Group Manager, Capital Projects       209709        157300        Group Manager, Capital Projects     
Executive Management               Assistant General Manager Operations  288160        212647        Assistant General Manager Operations
Executive Management               Deputy General Manager                281548        206914        Deputy General Manager              
Executive Management               General Manager                       819582        611161        General Manager                     
Finance & Accounting               Controller-Treasurer                  287139        208744        Controller-Treasurer                
Legal & Paralegal                  General Counsel                       321543        238269        General Counsel                     
Legal & Paralegal                  Senior Attorney                       445028        325759        Senior Attorney                     
Maintenance, Vehicle & Facilities  Electrician                           113775        59817         Electrician                         
Maintenance, Vehicle & Facilities  Structures Inspector                  124962        77446         Structures Inspector                
Maintenance, Vehicle & Facilities  Transit Vehicle Mechanic              104260        74068         Transit Vehicle Mechanic            
Maintenance, Vehicle & Facilities  Vehicle Inspector                     123432        77446         Vehicle Inspector                   
Maintenance, Vehicle & Facilities  Wayside Inspector                     128332        77446         Wayside Inspector                   
Police                             Revenue Protection Guard              127660        75701         Revenue Protection Guard            
Public Affairs & Marketing         Department Manager Gov't & Comm Rel   181955        130035        Department Manager Gov't & Comm Rel 
Safety                             Chief Safety Officer                  211941        152125        Chief Safety Officer                
Transportation Operations          Chief Transportation Officer          238211        170383        Chief Transportation Officer        
Transportation Operations          Station Agent                         352988        182342        Station Agent                       
Transportation Operations          Train Operator                        118799        61184         Train Operator                      

join result for depth 1: 
item        
------------
JobFamily   
Title       
Union       
Name        
Base        
TCOE        
Rec         
_depth      
_pivot      
_isRoot     
_sortVal_0  
_sortVal_1  
_sortVal_2  
_path0      
_path1      
_sortVal_0_0
_sortVal_0_1
_sortVal_0_2

JobFamily                          Title                                Union            Name              Base     TCOE     Rec  _depth  _pivot                             _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                             _path1  _sortVal_0_0  _sortVal_0_1  _sortVal_0_2                       
---------------------------------  -----------------------------------  ---------------  ----------------  -------  -------  ---  ------  ---------------------------------  -------  ----------  ----------  ----------  ---------------------------------  ------  ------------  ------------  -----------------------------------
Engineering & Systems Engineering  null                                 Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering  0        1           0           0           Engineering & Systems Engineering  null    422244        309734        null                               
Executive Management               null                                 Non-Represented  null              1030722  1389290  4    1       Executive Management               0        1           0           0           Executive Management               null    1389290       1030722       null                               
Finance & Accounting               Controller-Treasurer                 Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting               0        1           0           0           Finance & Accounting               null    287139        208744        Controller-Treasurer               
Legal & Paralegal                  null                                 Non-Represented  null              564028   766571   3    1       Legal & Paralegal                  0        1           0           0           Legal & Paralegal                  null    766571        564028        null                               
Maintenance, Vehicle & Facilities  null                                 SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities  0        1           0           0           Maintenance, Vehicle & Facilities  null    594761        366223        null                               
Police                             Revenue Protection Guard             BPOA             Ornellas, Robert  75701    127660   1    1       Police                             0        1           0           0           Police                             null    127660        75701         Revenue Protection Guard           
Public Affairs & Marketing         Department Manager Gov't & Comm Rel  Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing         0        1           0           0           Public Affairs & Marketing         null    181955        130035        Department Manager Gov't & Comm Rel
Safety                             Chief Safety Officer                 Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                             0        1           0           0           Safety                             null    211941        152125        Chief Safety Officer               
Transportation Operations          null                                 null             null              413909   709998   5    1       Transportation Operations          0        1           0           0           Transportation Operations          null    709998        413909        null                               

level 2 join result:
item        
------------
JobFamily   
Title       
Union       
Name        
Base        
TCOE        
Rec         
_depth      
_pivot      
_isRoot     
_sortVal_0  
_sortVal_1  
_sortVal_2  
_path0      
_path1      
_sortVal_0_0
_sortVal_0_1
_sortVal_0_2
_sortVal_1_0
_sortVal_1_1
_sortVal_1_2

JobFamily             Title                                 Union            Name              Base    TCOE    Rec  _depth  _pivot                                _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                _path1                                _sortVal_0_0  _sortVal_0_1  _sortVal_0_2  _sortVal_1_0  _sortVal_1_1  _sortVal_1_2                        
--------------------  ------------------------------------  ---------------  ----------------  ------  ------  ---  ------  ------------------------------------  -------  ----------  ----------  ----------  --------------------  ------------------------------------  ------------  ------------  ------------  ------------  ------------  ------------------------------------
Executive Management  Assistant General Manager Operations  Non-Represented  Oversier, Paul    212647  288160  1    2       Assistant General Manager Operations  0        1           1           0           Executive Management  Assistant General Manager Operations  1389290       1030722       null          288160        212647        Assistant General Manager Operations
Executive Management  Deputy General Manager                Non-Represented  DeVaughn, Marcia  206914  281548  1    2       Deputy General Manager                0        1           1           0           Executive Management  Deputy General Manager                1389290       1030722       null          281548        206914        Deputy General Manager              
Executive Management  General Manager                       Non-Represented  null              611161  819582  2    2       General Manager                       0        1           1           0           Executive Management  General Manager                       1389290       1030722       null          819582        611161        General Manager                     

tree query after opening paths:
item      
----------
JobFamily 
Title     
Union     
Name      
Base      
TCOE      
Rec       
_depth    
_pivot    
_isRoot   
_sortVal_0
_sortVal_1
_sortVal_2
_path0    
_path1    

JobFamily                          Title                                 Union            Name              Base     TCOE     Rec  _depth  _pivot                                _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                             _path1                              
---------------------------------  ------------------------------------  ---------------  ----------------  -------  -------  ---  ------  ------------------------------------  -------  ----------  ----------  ----------  ---------------------------------  ------------------------------------
null                               null                                  null             null              3251221  4691559  23   0       null                                  1        0           0           0           null                               null                                
Engineering & Systems Engineering  null                                  Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering     0        1           0           0           Engineering & Systems Engineering  null                                
Executive Management               null                                  Non-Represented  null              1030722  1389290  4    1       Executive Management                  0        1           0           0           Executive Management               null                                
Executive Management               Assistant General Manager Operations  Non-Represented  Oversier, Paul    212647   288160   1    2       Assistant General Manager Operations  0        1           1           0           Executive Management               Assistant General Manager Operations
Executive Management               Deputy General Manager                Non-Represented  DeVaughn, Marcia  206914   281548   1    2       Deputy General Manager                0        1           1           0           Executive Management               Deputy General Manager              
Executive Management               General Manager                       Non-Represented  null              611161   819582   2    2       General Manager                       0        1           1           0           Executive Management               General Manager                     
Executive Management               General Manager                       Non-Represented  Crunican, Grace   312461   399921   1    3       Crunican, Grace                       0        1           1           1           Executive Management               General Manager                     
Executive Management               General Manager                       Non-Represented  Dugger, Dorothy   298700   419661   1    3       Dugger, Dorothy                       0        1           1           1           Executive Management               General Manager                     
Finance & Accounting               Controller-Treasurer                  Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting                  0        1           0           0           Finance & Accounting               null                                
Legal & Paralegal                  null                                  Non-Represented  null              564028   766571   3    1       Legal & Paralegal                     0        1           0           0           Legal & Paralegal                  null                                
Maintenance, Vehicle & Facilities  null                                  SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities     0        1           0           0           Maintenance, Vehicle & Facilities  null                                
Police                             Revenue Protection Guard              BPOA             Ornellas, Robert  75701    127660   1    1       Police                                0        1           0           0           Police                             null                                
Public Affairs & Marketing         Department Manager Gov't & Comm Rel   Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing            0        1           0           0           Public Affairs & Marketing         null                                
Safety                             Chief Safety Officer                  Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                                0        1           0           0           Safety                             null                                
Safety                             Chief Safety Officer                  Non-Represented  Hardy, Leonard    152125   211941   1    2       Chief Safety Officer                  0        1           1           0           Safety                             Chief Safety Officer                
Transportation Operations          null                                  null             null              413909   709998   5    1       Transportation Operations             0        1           0           0           Transportation Operations          null                                

tree query after sort joins:
item        
------------
JobFamily   
Title       
Union       
Name        
Base        
TCOE        
Rec         
_depth      
_pivot      
_isRoot     
_sortVal_0  
_sortVal_1  
_sortVal_2  
_path0      
_path1      
_sortVal_0_0
_sortVal_0_1
_sortVal_0_2
_sortVal_1_0
_sortVal_1_1
_sortVal_1_2

JobFamily                          Title                                 Union            Name              Base     TCOE     Rec  _depth  _pivot                                _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                             _path1                                _sortVal_0_0  _sortVal_0_1  _sortVal_0_2                         _sortVal_1_0  _sortVal_1_1  _sortVal_1_2                        
---------------------------------  ------------------------------------  ---------------  ----------------  -------  -------  ---  ------  ------------------------------------  -------  ----------  ----------  ----------  ---------------------------------  ------------------------------------  ------------  ------------  -----------------------------------  ------------  ------------  ------------------------------------
null                               null                                  null             null              3251221  4691559  23   0       null                                  1        0           0           0           null                               null                                  null          null          null                                 null          null          null                                
Engineering & Systems Engineering  null                                  Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering     0        1           0           0           Engineering & Systems Engineering  null                                  422244        309734        null                                 null          null          null                                
Executive Management               null                                  Non-Represented  null              1030722  1389290  4    1       Executive Management                  0        1           0           0           Executive Management               null                                  1389290       1030722       null                                 null          null          null                                
Executive Management               Assistant General Manager Operations  Non-Represented  Oversier, Paul    212647   288160   1    2       Assistant General Manager Operations  0        1           1           0           Executive Management               Assistant General Manager Operations  1389290       1030722       null                                 288160        212647        Assistant General Manager Operations
Executive Management               Deputy General Manager                Non-Represented  DeVaughn, Marcia  206914   281548   1    2       Deputy General Manager                0        1           1           0           Executive Management               Deputy General Manager                1389290       1030722       null                                 281548        206914        Deputy General Manager              
Executive Management               General Manager                       Non-Represented  null              611161   819582   2    2       General Manager                       0        1           1           0           Executive Management               General Manager                       1389290       1030722       null                                 819582        611161        General Manager                     
Executive Management               General Manager                       Non-Represented  Crunican, Grace   312461   399921   1    3       Crunican, Grace                       0        1           1           1           Executive Management               General Manager                       1389290       1030722       null                                 819582        611161        General Manager                     
Executive Management               General Manager                       Non-Represented  Dugger, Dorothy   298700   419661   1    3       Dugger, Dorothy                       0        1           1           1           Executive Management               General Manager                       1389290       1030722       null                                 819582        611161        General Manager                     
Finance & Accounting               Controller-Treasurer                  Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting                  0        1           0           0           Finance & Accounting               null                                  287139        208744        Controller-Treasurer                 null          null          null                                
Legal & Paralegal                  null                                  Non-Represented  null              564028   766571   3    1       Legal & Paralegal                     0        1           0           0           Legal & Paralegal                  null                                  766571        564028        null                                 null          null          null                                
Maintenance, Vehicle & Facilities  null                                  SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities     0        1           0           0           Maintenance, Vehicle & Facilities  null                                  594761        366223        null                                 null          null          null                                
Police                             Revenue Protection Guard              BPOA             Ornellas, Robert  75701    127660   1    1       Police                                0        1           0           0           Police                             null                                  127660        75701         Revenue Protection Guard             null          null          null                                
Public Affairs & Marketing         Department Manager Gov't & Comm Rel   Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing            0        1           0           0           Public Affairs & Marketing         null                                  181955        130035        Department Manager Gov't & Comm Rel  null          null          null                                
Safety                             Chief Safety Officer                  Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                                0        1           0           0           Safety                             null                                  211941        152125        Chief Safety Officer                 null          null          null                                
Safety                             Chief Safety Officer                  Non-Represented  Hardy, Leonard    152125   211941   1    2       Chief Safety Officer                  0        1           1           0           Safety                             Chief Safety Officer                  211941        152125        Chief Safety Officer                 211941        152125        Chief Safety Officer                
Transportation Operations          null                                  null             null              413909   709998   5    1       Transportation Operations             0        1           0           0           Transportation Operations          null                                  709998        413909        null                                 null          null          null                                

result of sorted tree query:
item        
------------
JobFamily   
Title       
Union       
Name        
Base        
TCOE        
Rec         
_depth      
_pivot      
_isRoot     
_sortVal_0  
_sortVal_1  
_sortVal_2  
_path0      
_path1      
_sortVal_0_0
_sortVal_0_1
_sortVal_0_2
_sortVal_1_0
_sortVal_1_1
_sortVal_1_2

JobFamily                          Title                                 Union            Name              Base     TCOE     Rec  _depth  _pivot                                _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                             _path1                                _sortVal_0_0  _sortVal_0_1  _sortVal_0_2                         _sortVal_1_0  _sortVal_1_1  _sortVal_1_2                        
---------------------------------  ------------------------------------  ---------------  ----------------  -------  -------  ---  ------  ------------------------------------  -------  ----------  ----------  ----------  ---------------------------------  ------------------------------------  ------------  ------------  -----------------------------------  ------------  ------------  ------------------------------------
null                               null                                  null             null              3251221  4691559  23   0       null                                  1        0           0           0           null                               null                                  null          null          null                                 null          null          null                                
Executive Management               null                                  Non-Represented  null              1030722  1389290  4    1       Executive Management                  0        1           0           0           Executive Management               null                                  1389290       1030722       null                                 null          null          null                                
Executive Management               General Manager                       Non-Represented  null              611161   819582   2    2       General Manager                       0        1           1           0           Executive Management               General Manager                       1389290       1030722       null                                 819582        611161        General Manager                     
Executive Management               General Manager                       Non-Represented  Dugger, Dorothy   298700   419661   1    3       Dugger, Dorothy                       0        1           1           1           Executive Management               General Manager                       1389290       1030722       null                                 819582        611161        General Manager                     
Executive Management               General Manager                       Non-Represented  Crunican, Grace   312461   399921   1    3       Crunican, Grace                       0        1           1           1           Executive Management               General Manager                       1389290       1030722       null                                 819582        611161        General Manager                     
Executive Management               Assistant General Manager Operations  Non-Represented  Oversier, Paul    212647   288160   1    2       Assistant General Manager Operations  0        1           1           0           Executive Management               Assistant General Manager Operations  1389290       1030722       null                                 288160        212647        Assistant General Manager Operations
Executive Management               Deputy General Manager                Non-Represented  DeVaughn, Marcia  206914   281548   1    2       Deputy General Manager                0        1           1           0           Executive Management               Deputy General Manager                1389290       1030722       null                                 281548        206914        Deputy General Manager              
Legal & Paralegal                  null                                  Non-Represented  null              564028   766571   3    1       Legal & Paralegal                     0        1           0           0           Legal & Paralegal                  null                                  766571        564028        null                                 null          null          null                                
Transportation Operations          null                                  null             null              413909   709998   5    1       Transportation Operations             0        1           0           0           Transportation Operations          null                                  709998        413909        null                                 null          null          null                                
Maintenance, Vehicle & Facilities  null                                  SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities     0        1           0           0           Maintenance, Vehicle & Facilities  null                                  594761        366223        null                                 null          null          null                                
Engineering & Systems Engineering  null                                  Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering     0        1           0           0           Engineering & Systems Engineering  null                                  422244        309734        null                                 null          null          null                                
Finance & Accounting               Controller-Treasurer                  Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting                  0        1           0           0           Finance & Accounting               null                                  287139        208744        Controller-Treasurer                 null          null          null                                
Safety                             Chief Safety Officer                  Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                                0        1           0           0           Safety                             null                                  211941        152125        Chief Safety Officer                 null          null          null                                
Safety                             Chief Safety Officer                  Non-Represented  Hardy, Leonard    152125   211941   1    2       Chief Safety Officer                  0        1           1           0           Safety                             Chief Safety Officer                  211941        152125        Chief Safety Officer                 211941        152125        Chief Safety Officer                
Public Affairs & Marketing         Department Manager Gov't & Comm Rel   Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing            0        1           0           0           Public Affairs & Marketing         null                                  181955        130035        Department Manager Gov't & Comm Rel  null          null          null                                
Police                             Revenue Protection Guard              BPOA             Ornellas, Robert  75701    127660   1    1       Police                                0        1           0           0           Police                             null                                  127660        75701         Revenue Protection Guard             null          null          null                                

    ✓ finished getting sort tables

  basicPivotSortTest
vpivot initial promise resolved...
result of sorted tree query:
item        
------------
JobFamily   
Title       
Union       
Name        
Base        
TCOE        
Rec         
_depth      
_pivot      
_isRoot     
_sortVal_0  
_sortVal_1  
_path0      
_sortVal_0_0

JobFamily                          Title                                Union            Name               Base     TCOE     Rec  _depth  _pivot                             _isRoot  _sortVal_0  _sortVal_1  _path0                             _sortVal_0_0                       
---------------------------------  -----------------------------------  ---------------  -----------------  -------  -------  ---  ------  ---------------------------------  -------  ----------  ----------  ---------------------------------  -----------------------------------
null                               null                                 null             null               3251221  4691559  23   0       null                               1        0           0           null                               null                               
Engineering & Systems Engineering  null                                 Non-Represented  null               309734   422244   2    1       Engineering & Systems Engineering  0        1           0           Engineering & Systems Engineering  null                               
Executive Management               null                                 Non-Represented  null               1030722  1389290  4    1       Executive Management               0        1           0           Executive Management               null                               
Legal & Paralegal                  null                                 Non-Represented  null               564028   766571   3    1       Legal & Paralegal                  0        1           0           Legal & Paralegal                  null                               
Legal & Paralegal                  General Counsel                      Non-Represented  Burrows, Matthew   238269   321543   1    2       Burrows, Matthew                   0        1           1           Legal & Paralegal                  null                               
Legal & Paralegal                  Senior Attorney                      Non-Represented  Lee, Thomas        165470   224345   1    2       Lee, Thomas                        0        1           1           Legal & Paralegal                  null                               
Legal & Paralegal                  Senior Attorney                      Non-Represented  Nuetzel, Victoria  160289   220683   1    2       Nuetzel, Victoria                  0        1           1           Legal & Paralegal                  null                               
Maintenance, Vehicle & Facilities  null                                 SEIU             null               366223   594761   5    1       Maintenance, Vehicle & Facilities  0        1           0           Maintenance, Vehicle & Facilities  null                               
Transportation Operations          null                                 null             null               413909   709998   5    1       Transportation Operations          0        1           0           Transportation Operations          null                               
Safety                             Chief Safety Officer                 Non-Represented  Hardy, Leonard     152125   211941   1    1       Safety                             0        1           0           Safety                             Chief Safety Officer               
Finance & Accounting               Controller-Treasurer                 Non-Represented  Schroeder, Scott   208744   287139   1    1       Finance & Accounting               0        1           0           Finance & Accounting               Controller-Treasurer               
Public Affairs & Marketing         Department Manager Gov't & Comm Rel  Non-Represented  Hamill, Kerry      130035   181955   1    1       Public Affairs & Marketing         0        1           0           Public Affairs & Marketing         Department Manager Gov't & Comm Rel
Police                             Revenue Protection Guard             BPOA             Ornellas, Robert   75701    127660   1    1       Police                             0        1           0           Police                             Revenue Protection Guard           

    ✓ sorted tree query matches snapshot (comparing to saved snapshot)

  descPivotSortTest
vpivot initial promise resolved...
baseRes:
item      
----------
JobFamily 
Title     
Union     
Name      
Base      
TCOE      
Rec       
_depth    
_pivot    
_isRoot   
_sortVal_0
_sortVal_1
_path0    

JobFamily                          Title                                Union            Name              Base     TCOE     Rec  _depth  _pivot                             _isRoot  _sortVal_0  _sortVal_1  _path0                           
---------------------------------  -----------------------------------  ---------------  ----------------  -------  -------  ---  ------  ---------------------------------  -------  ----------  ----------  ---------------------------------
Engineering & Systems Engineering  null                                 Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering  0        1           0           Engineering & Systems Engineering
Executive Management               null                                 Non-Represented  null              1030722  1389290  4    1       Executive Management               0        1           0           Executive Management             
Finance & Accounting               Controller-Treasurer                 Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting               0        1           0           Finance & Accounting             
Legal & Paralegal                  null                                 Non-Represented  null              564028   766571   3    1       Legal & Paralegal                  0        1           0           Legal & Paralegal                
Maintenance, Vehicle & Facilities  null                                 SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities  0        1           0           Maintenance, Vehicle & Facilities
Police                             Revenue Protection Guard             BPOA             Ornellas, Robert  75701    127660   1    1       Police                             0        1           0           Police                           
Public Affairs & Marketing         Department Manager Gov't & Comm Rel  Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing         0        1           0           Public Affairs & Marketing       
Safety                             Chief Safety Officer                 Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                             0        1           0           Safety                           
Transportation Operations          null                                 null             null              413909   709998   5    1       Transportation Operations          0        1           0           Transportation Operations        

result of sorted tree query:
item        
------------
JobFamily   
Title       
Union       
Name        
Base        
TCOE        
Rec         
_depth      
_pivot      
_isRoot     
_sortVal_0  
_sortVal_1  
_path0      
_sortVal_0_0

JobFamily                          Title                                Union            Name               Base     TCOE     Rec  _depth  _pivot                             _isRoot  _sortVal_0  _sortVal_1  _path0                             _sortVal_0_0                       
---------------------------------  -----------------------------------  ---------------  -----------------  -------  -------  ---  ------  ---------------------------------  -------  ----------  ----------  ---------------------------------  -----------------------------------
null                               null                                 null             null               3251221  4691559  23   0       null                               1        0           0           null                               null                               
Police                             Revenue Protection Guard             BPOA             Ornellas, Robert   75701    127660   1    1       Police                             0        1           0           Police                             Revenue Protection Guard           
Public Affairs & Marketing         Department Manager Gov't & Comm Rel  Non-Represented  Hamill, Kerry      130035   181955   1    1       Public Affairs & Marketing         0        1           0           Public Affairs & Marketing         Department Manager Gov't & Comm Rel
Finance & Accounting               Controller-Treasurer                 Non-Represented  Schroeder, Scott   208744   287139   1    1       Finance & Accounting               0        1           0           Finance & Accounting               Controller-Treasurer               
Safety                             Chief Safety Officer                 Non-Represented  Hardy, Leonard     152125   211941   1    1       Safety                             0        1           0           Safety                             Chief Safety Officer               
Engineering & Systems Engineering  null                                 Non-Represented  null               309734   422244   2    1       Engineering & Systems Engineering  0        1           0           Engineering & Systems Engineering  null                               
Executive Management               null                                 Non-Represented  null               1030722  1389290  4    1       Executive Management               0        1           0           Executive Management               null                               
Legal & Paralegal                  null                                 Non-Represented  null               564028   766571   3    1       Legal & Paralegal                  0        1           0           Legal & Paralegal                  null                               
Legal & Paralegal                  Senior Attorney                      Non-Represented  Lee, Thomas        165470   224345   1    2       Lee, Thomas                        0        1           1           Legal & Paralegal                  null                               
Legal & Paralegal                  Senior Attorney                      Non-Represented  Nuetzel, Victoria  160289   220683   1    2       Nuetzel, Victoria                  0        1           1           Legal & Paralegal                  null                               
Legal & Paralegal                  General Counsel                      Non-Represented  Burrows, Matthew   238269   321543   1    2       Burrows, Matthew                   0        1           1           Legal & Paralegal                  null                               
Maintenance, Vehicle & Facilities  null                                 SEIU             null               366223   594761   5    1       Maintenance, Vehicle & Facilities  0        1           0           Maintenance, Vehicle & Facilities  null                               
Transportation Operations          null                                 null             null               413909   709998   5    1       Transportation Operations          0        1           0           Transportation Operations          null                               

    ✓ sorted tree query matches snapshot (comparing to saved snapshot)

  multiPivotSingleSortTest
vpivot initial promise resolved...
result of sorted tree query:
item        
------------
JobFamily   
Title       
Union       
Name        
Base        
TCOE        
Rec         
_depth      
_pivot      
_isRoot     
_sortVal_0  
_sortVal_1  
_sortVal_2  
_path0      
_path1      
_sortVal_0_0
_sortVal_1_0

JobFamily                          Title                                Union            Name              Base     TCOE     Rec  _depth  _pivot                             _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0                             _path1           _sortVal_0_0                         _sortVal_1_0   
---------------------------------  -----------------------------------  ---------------  ----------------  -------  -------  ---  ------  ---------------------------------  -------  ----------  ----------  ----------  ---------------------------------  ---------------  -----------------------------------  ---------------
null                               null                                 null             null              3251221  4691559  23   0       null                               1        0           0           0           null                               null             null                                 null           
Engineering & Systems Engineering  null                                 Non-Represented  null              309734   422244   2    1       Engineering & Systems Engineering  0        1           0           0           Engineering & Systems Engineering  null             null                                 null           
Executive Management               null                                 Non-Represented  null              1030722  1389290  4    1       Executive Management               0        1           0           0           Executive Management               null             null                                 null           
Legal & Paralegal                  null                                 Non-Represented  null              564028   766571   3    1       Legal & Paralegal                  0        1           0           0           Legal & Paralegal                  null             null                                 null           
Legal & Paralegal                  General Counsel                      Non-Represented  Burrows, Matthew  238269   321543   1    2       General Counsel                    0        1           1           0           Legal & Paralegal                  General Counsel  null                                 General Counsel
Legal & Paralegal                  Senior Attorney                      Non-Represented  null              325759   445028   2    2       Senior Attorney                    0        1           1           0           Legal & Paralegal                  Senior Attorney  null                                 Senior Attorney
Maintenance, Vehicle & Facilities  null                                 SEIU             null              366223   594761   5    1       Maintenance, Vehicle & Facilities  0        1           0           0           Maintenance, Vehicle & Facilities  null             null                                 null           
Transportation Operations          null                                 null             null              413909   709998   5    1       Transportation Operations          0        1           0           0           Transportation Operations          null             null                                 null           
Safety                             Chief Safety Officer                 Non-Represented  Hardy, Leonard    152125   211941   1    1       Safety                             0        1           0           0           Safety                             null             Chief Safety Officer                 null           
Finance & Accounting               Controller-Treasurer                 Non-Represented  Schroeder, Scott  208744   287139   1    1       Finance & Accounting               0        1           0           0           Finance & Accounting               null             Controller-Treasurer                 null           
Public Affairs & Marketing         Department Manager Gov't & Comm Rel  Non-Represented  Hamill, Kerry     130035   181955   1    1       Public Affairs & Marketing         0        1           0           0           Public Affairs & Marketing         null             Department Manager Gov't & Comm Rel  null           
Police                             Revenue Protection Guard             BPOA             Ornellas, Robert  75701    127660   1    1       Police                             0        1           0           0           Police                             null             Revenue Protection Guard             null           

    ✓ sorted tree query (comparing to saved snapshot)

  intPivotTest
vpivot initial promise resolved...
result of numeric pivot:
item      
----------
JobFamily 
Title     
Union     
Name      
Base      
TCOE      
Rec       
_depth    
_pivot    
_isRoot   
_sortVal_0
_sortVal_1
_sortVal_2
_path0    
_path1    

JobFamily                          Title                                 Union            Name                Base     TCOE     Rec  _depth  _pivot                             _isRoot  _sortVal_0  _sortVal_1  _sortVal_2  _path0  _path1                           
---------------------------------  ------------------------------------  ---------------  ------------------  -------  -------  ---  ------  ---------------------------------  -------  ----------  ----------  ----------  ------  ---------------------------------
null                               null                                  null             null                3251221  4691559  23   0       null                               1        0           0           0           null    null                             
Maintenance, Vehicle & Facilities  Electrician                           SEIU             Knight, Joshua      59817    113775   1    1       59817                              0        1           0           0           59817   null                             
Transportation Operations          Station Agent                         ATU              Riggs, Joshua       60771    115104   1    1       60771                              0        1           0           0           60771   null                             
Transportation Operations          Station Agent                         ATU              Nagel, Kevin        60781    105854   1    1       60781                              0        1           0           0           60781   null                             
Transportation Operations          Station Agent                         ATU              Serrianni, Cheryl   60790    132030   1    1       60790                              0        1           0           0           60790   null                             
Transportation Operations          Train Operator                        ATU              Smith, Westley      61184    118799   1    1       61184                              0        1           0           0           61184   null                             
Maintenance, Vehicle & Facilities  Transit Vehicle Mechanic              SEIU             Smith, Daniel       74068    104260   1    1       74068                              0        1           0           0           74068   null                             
Police                             Revenue Protection Guard              BPOA             Ornellas, Robert    75701    127660   1    1       75701                              0        1           0           0           75701   null                             
Police                             Revenue Protection Guard              BPOA             Ornellas, Robert    75701    127660   1    2       Police                             0        1           1           0           75701   Police                           
Police                             Revenue Protection Guard              BPOA             Ornellas, Robert    75701    127660   1    3       Ornellas, Robert                   0        1           1           1           75701   Police                           
Maintenance, Vehicle & Facilities  null                                  SEIU             null                232338   376726   3    1       77446                              0        1           0           0           77446   null                             
Maintenance, Vehicle & Facilities  null                                  SEIU             null                232338   376726   3    2       Maintenance, Vehicle & Facilities  0        1           1           0           77446   Maintenance, Vehicle & Facilities
Maintenance, Vehicle & Facilities  Wayside Inspector                     SEIU             Hui, Sam            77446    128332   1    3       Hui, Sam                           0        1           1           1           77446   Maintenance, Vehicle & Facilities
Maintenance, Vehicle & Facilities  Structures Inspector                  SEIU             Reinhardt, Michael  77446    124962   1    3       Reinhardt, Michael                 0        1           1           1           77446   Maintenance, Vehicle & Facilities
Maintenance, Vehicle & Facilities  Vehicle Inspector                     SEIU             Estrada, Phillip    77446    123432   1    3       Estrada, Phillip                   0        1           1           1           77446   Maintenance, Vehicle & Facilities
Public Affairs & Marketing         Department Manager Gov't & Comm Rel   Non-Represented  Hamill, Kerry       130035   181955   1    1       130035                             0        1           0           0           130035  null                             
Safety                             Chief Safety Officer                  Non-Represented  Hardy, Leonard      152125   211941   1    1       152125                             0        1           0           0           152125  null                             
Engineering & Systems Engineering  Group Manager Systems Capital Prog    Non-Represented  Dupont, Jean-Luc    152434   212535   1    1       152434                             0        1           0           0           152434  null                             
Engineering & Systems Engineering  Group Manager, Capital Projects       Non-Represented  Ruffa, Frank        157300   209709   1    1       157300                             0        1           0           0           157300  null                             
Legal & Paralegal                  Senior Attorney                       Non-Represented  Nuetzel, Victoria   160289   220683   1    1       160289                             0        1           0           0           160289  null                             
Legal & Paralegal                  Senior Attorney                       Non-Represented  Lee, Thomas         165470   224345   1    1       165470                             0        1           0           0           165470  null                             
Transportation Operations          Chief Transportation Officer          Non-Represented  Crespo, Rodolfo     170383   238211   1    1       170383                             0        1           0           0           170383  null                             
Executive Management               Deputy General Manager                Non-Represented  DeVaughn, Marcia    206914   281548   1    1       206914                             0        1           0           0           206914  null                             
Finance & Accounting               Controller-Treasurer                  Non-Represented  Schroeder, Scott    208744   287139   1    1       208744                             0        1           0           0           208744  null                             
Executive Management               Assistant General Manager Operations  Non-Represented  Oversier, Paul      212647   288160   1    1       212647                             0        1           0           0           212647  null                             
Legal & Paralegal                  General Counsel                       Non-Represented  Burrows, Matthew    238269   321543   1    1       238269                             0        1           0           0           238269  null                             
Executive Management               General Manager                       Non-Represented  Dugger, Dorothy     298700   419661   1    1       298700                             0        1           0           0           298700  null                             
Executive Management               General Manager                       Non-Represented  Crunican, Grace     312461   399921   1    1       312461                             0        1           0           0           312461  null                             

    ✓ int pivot query (comparing to saved snapshot)

  queryGenPerfTest
vpivot initial promise resolved...
    ✓ executed all queries

  distinctTest
    ✓ distinct query (comparing to saved snapshot)
    ✓ distinct query

  sqlite test shutdown
shut down sqlite
    ✓ finished db.close

45 passing (597ms)

